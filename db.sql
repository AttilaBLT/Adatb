--------------------------------------------------------
--  File created - vasárnap-május-18-2025   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table ASK
--------------------------------------------------------

  CREATE TABLE "ATTILA"."ASK" 
   (	"USER_ID" NUMBER, 
	"FAQ_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DATABASES
--------------------------------------------------------

  CREATE TABLE "ATTILA"."DATABASES" 
   (	"ID" NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"USER_ID" NUMBER, 
	"NAME" VARCHAR2(100 BYTE), 
	"SIZE_MB" NUMBER DEFAULT 0, 
	"CREATED_AT" DATE DEFAULT SYSDATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table FAQ
--------------------------------------------------------

  CREATE TABLE "ATTILA"."FAQ" 
   (	"FAQ_ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"QUESTION" VARCHAR2(255 BYTE), 
	"ANSWER" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table NOTIFICATIONS
--------------------------------------------------------

  CREATE TABLE "ATTILA"."NOTIFICATIONS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"USER_ID" NUMBER, 
	"MESSAGE" VARCHAR2(255 BYTE), 
	"CREATED_AT" DATE DEFAULT SYSDATE, 
	"SUBSCRIPTION_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PAYMENT
--------------------------------------------------------

  CREATE TABLE "ATTILA"."PAYMENT" 
   (	"PAYMENT_ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"USER_ID" NUMBER, 
	"SUBSCRIPTION_ID" NUMBER, 
	"AMOUNT" NUMBER(10,2), 
	"DUE_DATE" DATE, 
	"METHOD" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SERVICE
--------------------------------------------------------

  CREATE TABLE "ATTILA"."SERVICE" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"PRICE" NUMBER(10,2), 
	"SERVICE_TYPE" VARCHAR2(50 BYTE), 
	"VPS_ID" NUMBER, 
	"WEBSTORAGE_ID" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SUBSCRIPTION
--------------------------------------------------------

  CREATE TABLE "ATTILA"."SUBSCRIPTION" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"USER_ID" NUMBER, 
	"SERVICE_ID" NUMBER, 
	"START_DATE" DATE, 
	"END_DATE" DATE, 
	"STATUS" VARCHAR2(50 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table USERS
--------------------------------------------------------

  CREATE TABLE "ATTILA"."USERS" 
   (	"USER_ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"USERNAME" VARCHAR2(50 BYTE), 
	"EMAIL" VARCHAR2(100 BYTE), 
	"PASSWORD_HASH" VARCHAR2(255 BYTE), 
	"ROLE" VARCHAR2(20 BYTE) DEFAULT 'user'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table VPS
--------------------------------------------------------

  CREATE TABLE "ATTILA"."VPS" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"SERVER_SPECS" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table WEBSITE
--------------------------------------------------------

  CREATE TABLE "ATTILA"."WEBSITE" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"USER_ID" NUMBER, 
	"SERVER_ID" NUMBER, 
	"ADDRESS" VARCHAR2(255 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table WEBSTORAGE
--------------------------------------------------------

  CREATE TABLE "ATTILA"."WEBSTORAGE" 
   (	"ID" NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE , 
	"NAME" VARCHAR2(100 BYTE), 
	"DESCRIPTION" VARCHAR2(255 BYTE), 
	"STORAGE_SPACE" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into ATTILA.ASK
SET DEFINE OFF;
Insert into ATTILA.ASK (USER_ID,FAQ_ID) values ('9','5');
REM INSERTING into ATTILA.DATABASES
SET DEFINE OFF;
Insert into ATTILA.DATABASES (ID,USER_ID,NAME,SIZE_MB,CREATED_AT) values ('1','10','Próba','15360',to_date('25-MÁJ.  -18','RR-MON-DD'));
REM INSERTING into ATTILA.FAQ
SET DEFINE OFF;
Insert into ATTILA.FAQ (FAQ_ID,QUESTION,ANSWER) values ('3','Kérdés','Válasz');
Insert into ATTILA.FAQ (FAQ_ID,QUESTION,ANSWER) values ('2','szöveg','szöveg');
Insert into ATTILA.FAQ (FAQ_ID,QUESTION,ANSWER) values ('5','Hogyan tudok regisztrálni?','A regisztráció fülre kattintva és a szükséges adatok megadása után.');
REM INSERTING into ATTILA.NOTIFICATIONS
SET DEFINE OFF;
Insert into ATTILA.NOTIFICATIONS (ID,USER_ID,MESSAGE,CREATED_AT,SUBSCRIPTION_ID) values ('21','9','Az Ön VPS előfizetése hamarosan lejár. Kérjük, hosszabbítsa meg!',to_date('25-MÁJ.  -07','RR-MON-DD'),'24');
Insert into ATTILA.NOTIFICATIONS (ID,USER_ID,MESSAGE,CREATED_AT,SUBSCRIPTION_ID) values ('41','9','Az Ön Webstorage előfizetése hamarosan lejár. Kérjük, hosszabbítsa meg!',to_date('25-MÁJ.  -07','RR-MON-DD'),'44');
REM INSERTING into ATTILA.PAYMENT
SET DEFINE OFF;
Insert into ATTILA.PAYMENT (PAYMENT_ID,USER_ID,SUBSCRIPTION_ID,AMOUNT,DUE_DATE,METHOD) values ('61','9','24','10000',to_date('25-MÁJ.  -12','RR-MON-DD'),'Bankkártya');
REM INSERTING into ATTILA.SERVICE
SET DEFINE OFF;
Insert into ATTILA.SERVICE (ID,PRICE,SERVICE_TYPE,VPS_ID,WEBSTORAGE_ID) values ('1','10000','VPS','1',null);
Insert into ATTILA.SERVICE (ID,PRICE,SERVICE_TYPE,VPS_ID,WEBSTORAGE_ID) values ('2','12000','Webstorage',null,'2');
Insert into ATTILA.SERVICE (ID,PRICE,SERVICE_TYPE,VPS_ID,WEBSTORAGE_ID) values ('3','14000','VPS','3',null);
Insert into ATTILA.SERVICE (ID,PRICE,SERVICE_TYPE,VPS_ID,WEBSTORAGE_ID) values ('4','16000','Webstorage',null,'4');
Insert into ATTILA.SERVICE (ID,PRICE,SERVICE_TYPE,VPS_ID,WEBSTORAGE_ID) values ('5','18000','VPS','5',null);
REM INSERTING into ATTILA.SUBSCRIPTION
SET DEFINE OFF;
Insert into ATTILA.SUBSCRIPTION (ID,USER_ID,SERVICE_ID,START_DATE,END_DATE,STATUS) values ('24','9','1',to_date('25-MÁJ.  -07','RR-MON-DD'),to_date('25-MÁJ.  -13','RR-MON-DD'),'Aktív');
Insert into ATTILA.SUBSCRIPTION (ID,USER_ID,SERVICE_ID,START_DATE,END_DATE,STATUS) values ('44','9','4',to_date('25-MÁJ.  -06','RR-MON-DD'),to_date('25-MÁJ.  -09','RR-MON-DD'),'Aktív');
REM INSERTING into ATTILA.USERS
SET DEFINE OFF;
Insert into ATTILA.USERS (USER_ID,USERNAME,EMAIL,PASSWORD_HASH,ROLE) values ('6','teszt','teszt@gmail.com','$2y$10$MpY7V.lSiY.Pn2FdxymhIO.MX0exfwFjoqSB9g2AJyvjEJmkXxtpO','user');
Insert into ATTILA.USERS (USER_ID,USERNAME,EMAIL,PASSWORD_HASH,ROLE) values ('7','probaproba','proba123456@gmail.com','$2y$10$IliS9xrvSbpwa6Mw3M/nz.8478s59yo6/cQ.99aAw2uWLNJOa5GEq','user');
Insert into ATTILA.USERS (USER_ID,USERNAME,EMAIL,PASSWORD_HASH,ROLE) values ('9','Ati','Ati@gmail.com','$2y$10$69rWRdSRtGBiofnCu9XPJuLu9QHm1vBhwDMmwbGXiIoTJN5QFXzou','admin');
Insert into ATTILA.USERS (USER_ID,USERNAME,EMAIL,PASSWORD_HASH,ROLE) values ('10','teszt','teszt@teszt.com','$2y$10$apRLtBAGijfP/3e5p4IQqOXSD/gsrYq/hFgRS1gpr5HcZ9yS663.2','user');
REM INSERTING into ATTILA.VPS
SET DEFINE OFF;
Insert into ATTILA.VPS (ID,SERVER_SPECS) values ('1','4 Core, 16GB RAM, 200GB SSD');
Insert into ATTILA.VPS (ID,SERVER_SPECS) values ('2','8 Core, 32GB RAM, 500GB SSD');
Insert into ATTILA.VPS (ID,SERVER_SPECS) values ('3','2 Core, 8GB RAM, 100GB SSD');
Insert into ATTILA.VPS (ID,SERVER_SPECS) values ('4','16 Core, 64GB RAM, 1TB SSD');
Insert into ATTILA.VPS (ID,SERVER_SPECS) values ('5','1 Core, 4GB RAM, 50GB SSD');
REM INSERTING into ATTILA.WEBSITE
SET DEFINE OFF;
Insert into ATTILA.WEBSITE (ID,USER_ID,SERVER_ID,ADDRESS) values ('1','9','1','próba.com');
REM INSERTING into ATTILA.WEBSTORAGE
SET DEFINE OFF;
Insert into ATTILA.WEBSTORAGE (ID,NAME,DESCRIPTION,STORAGE_SPACE) values ('1','Tárhely1','Alap tárhely','100');
Insert into ATTILA.WEBSTORAGE (ID,NAME,DESCRIPTION,STORAGE_SPACE) values ('2','Tárhely2','Premium tarhely','200');
Insert into ATTILA.WEBSTORAGE (ID,NAME,DESCRIPTION,STORAGE_SPACE) values ('3','Tárhely3','Business tarhely','500');
Insert into ATTILA.WEBSTORAGE (ID,NAME,DESCRIPTION,STORAGE_SPACE) values ('4','Tárhely4','Enterprise tarhely','1000');
Insert into ATTILA.WEBSTORAGE (ID,NAME,DESCRIPTION,STORAGE_SPACE) values ('5','Tárhely5','Szemelyes tarhely','50');
--------------------------------------------------------
--  DDL for Index PK_ASK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."PK_ASK" ON "ATTILA"."ASK" ("USER_ID", "FAQ_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010136
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010136" ON "ATTILA"."DATABASES" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010089
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010089" ON "ATTILA"."FAQ" ("FAQ_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010129
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010129" ON "ATTILA"."NOTIFICATIONS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010119
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010119" ON "ATTILA"."PAYMENT" ("PAYMENT_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010106
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010106" ON "ATTILA"."SERVICE" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010112
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010112" ON "ATTILA"."SUBSCRIPTION" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010085
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010085" ON "ATTILA"."USERS" ("USER_ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010086
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010086" ON "ATTILA"."USERS" ("EMAIL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010092
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010092" ON "ATTILA"."VPS" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010095
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010095" ON "ATTILA"."WEBSITE" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010096
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010096" ON "ATTILA"."WEBSITE" ("ADDRESS") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C0010102
--------------------------------------------------------

  CREATE UNIQUE INDEX "ATTILA"."SYS_C0010102" ON "ATTILA"."WEBSTORAGE" ("ID") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Trigger DELETENOTIFICATIONSONVPSDELETE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."DELETENOTIFICATIONSONVPSDELETE" 
AFTER DELETE ON ATTILA.VPS
FOR EACH ROW
BEGIN
    DELETE FROM ATTILA.NOTIFICATIONS
    WHERE USER_ID IN (
        SELECT USER_ID
        FROM ATTILA.SUBSCRIPTION s
        JOIN ATTILA.SERVICE srv ON s.SERVICE_ID = srv.ID
        WHERE srv.VPS_ID = :OLD.ID
    );

    DELETE FROM ATTILA.SUBSCRIPTION
    WHERE SERVICE_ID IN (
        SELECT ID
        FROM ATTILA.SERVICE
        WHERE VPS_ID = :OLD.ID
    );
END;

/
ALTER TRIGGER "ATTILA"."DELETENOTIFICATIONSONVPSDELETE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DELETENOTIFYONWEBSTORAGE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."DELETENOTIFYONWEBSTORAGE" 
AFTER DELETE ON ATTILA.SERVICE
FOR EACH ROW
BEGIN
    DELETE FROM ATTILA.NOTIFICATIONS
    WHERE USER_ID IN (
        SELECT USER_ID
        FROM ATTILA.SUBSCRIPTION s
        JOIN ATTILA.SERVICE srv ON s.SERVICE_ID = srv.ID
        WHERE srv.WEBSTORAGE_ID = :OLD.ID
    );

    DELETE FROM ATTILA.SUBSCRIPTION
    WHERE SERVICE_ID IN (
        SELECT ID
        FROM ATTILA.SERVICE
        WHERE WEBSTORAGE_ID = :OLD.ID
    );
END;
/
ALTER TRIGGER "ATTILA"."DELETENOTIFYONWEBSTORAGE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NOTIFYVPSEXPIRATION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."NOTIFYVPSEXPIRATION" 
AFTER INSERT OR UPDATE ON ATTILA.SUBSCRIPTION
FOR EACH ROW
 WHEN (NEW.SERVICE_ID IS NOT NULL AND NEW.END_DATE - SYSDATE <= 7 AND NEW.STATUS = 'Aktív') DECLARE
    v_service_type VARCHAR2(50);
BEGIN
    SELECT SERVICE_TYPE INTO v_service_type
    FROM ATTILA.SERVICE
    WHERE ID = :NEW.SERVICE_ID;

    IF v_service_type = 'VPS' THEN
        INSERT INTO ATTILA.NOTIFICATIONS (USER_ID, SUBSCRIPTION_ID, MESSAGE)
        VALUES (:NEW.USER_ID, :NEW.ID, 'Az Ön VPS előfizetése hamarosan lejár. Kérjük, hosszabbítsa meg!');
    END IF;
END;
/
ALTER TRIGGER "ATTILA"."NOTIFYVPSEXPIRATION" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NOTIFYWEBSTORAGEEXPIRATION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."NOTIFYWEBSTORAGEEXPIRATION" 
AFTER INSERT OR UPDATE ON ATTILA.SUBSCRIPTION
FOR EACH ROW
 WHEN (NEW.SERVICE_ID IS NOT NULL AND NEW.END_DATE - SYSDATE <= 7 AND NEW.STATUS = 'Aktív') DECLARE
    v_service_type VARCHAR2(50);
BEGIN
    SELECT SERVICE_TYPE INTO v_service_type
    FROM ATTILA.SERVICE
    WHERE ID = :NEW.SERVICE_ID;

    IF v_service_type = 'Webstorage' THEN
        INSERT INTO ATTILA.NOTIFICATIONS (USER_ID, MESSAGE, SUBSCRIPTION_ID)
        VALUES (:NEW.USER_ID, 'Az Ön Webstorage előfizetése hamarosan lejár. Kérjük, hosszabbítsa meg!', :NEW.ID);
    END IF;
END;
/
ALTER TRIGGER "ATTILA"."NOTIFYWEBSTORAGEEXPIRATION" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DELETENOTIFYONWEBSTORAGE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."DELETENOTIFYONWEBSTORAGE" 
AFTER DELETE ON ATTILA.SERVICE
FOR EACH ROW
BEGIN
    DELETE FROM ATTILA.NOTIFICATIONS
    WHERE USER_ID IN (
        SELECT USER_ID
        FROM ATTILA.SUBSCRIPTION s
        JOIN ATTILA.SERVICE srv ON s.SERVICE_ID = srv.ID
        WHERE srv.WEBSTORAGE_ID = :OLD.ID
    );

    DELETE FROM ATTILA.SUBSCRIPTION
    WHERE SERVICE_ID IN (
        SELECT ID
        FROM ATTILA.SERVICE
        WHERE WEBSTORAGE_ID = :OLD.ID
    );
END;
/
ALTER TRIGGER "ATTILA"."DELETENOTIFYONWEBSTORAGE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NOTIFYWEBSTORAGEEXPIRATION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."NOTIFYWEBSTORAGEEXPIRATION" 
AFTER INSERT OR UPDATE ON ATTILA.SUBSCRIPTION
FOR EACH ROW
 WHEN (NEW.SERVICE_ID IS NOT NULL AND NEW.END_DATE - SYSDATE <= 7 AND NEW.STATUS = 'Aktív') DECLARE
    v_service_type VARCHAR2(50);
BEGIN
    SELECT SERVICE_TYPE INTO v_service_type
    FROM ATTILA.SERVICE
    WHERE ID = :NEW.SERVICE_ID;

    IF v_service_type = 'Webstorage' THEN
        INSERT INTO ATTILA.NOTIFICATIONS (USER_ID, MESSAGE, SUBSCRIPTION_ID)
        VALUES (:NEW.USER_ID, 'Az Ön Webstorage előfizetése hamarosan lejár. Kérjük, hosszabbítsa meg!', :NEW.ID);
    END IF;
END;
/
ALTER TRIGGER "ATTILA"."NOTIFYWEBSTORAGEEXPIRATION" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NOTIFYVPSEXPIRATION
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."NOTIFYVPSEXPIRATION" 
AFTER INSERT OR UPDATE ON ATTILA.SUBSCRIPTION
FOR EACH ROW
 WHEN (NEW.SERVICE_ID IS NOT NULL AND NEW.END_DATE - SYSDATE <= 7 AND NEW.STATUS = 'Aktív') DECLARE
    v_service_type VARCHAR2(50);
BEGIN
    SELECT SERVICE_TYPE INTO v_service_type
    FROM ATTILA.SERVICE
    WHERE ID = :NEW.SERVICE_ID;

    IF v_service_type = 'VPS' THEN
        INSERT INTO ATTILA.NOTIFICATIONS (USER_ID, SUBSCRIPTION_ID, MESSAGE)
        VALUES (:NEW.USER_ID, :NEW.ID, 'Az Ön VPS előfizetése hamarosan lejár. Kérjük, hosszabbítsa meg!');
    END IF;
END;
/
ALTER TRIGGER "ATTILA"."NOTIFYVPSEXPIRATION" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DELETENOTIFICATIONSONVPSDELETE
--------------------------------------------------------

  CREATE OR REPLACE EDITIONABLE TRIGGER "ATTILA"."DELETENOTIFICATIONSONVPSDELETE" 
AFTER DELETE ON ATTILA.VPS
FOR EACH ROW
BEGIN
    DELETE FROM ATTILA.NOTIFICATIONS
    WHERE USER_ID IN (
        SELECT USER_ID
        FROM ATTILA.SUBSCRIPTION s
        JOIN ATTILA.SERVICE srv ON s.SERVICE_ID = srv.ID
        WHERE srv.VPS_ID = :OLD.ID
    );

    DELETE FROM ATTILA.SUBSCRIPTION
    WHERE SERVICE_ID IN (
        SELECT ID
        FROM ATTILA.SERVICE
        WHERE VPS_ID = :OLD.ID
    );
END;

/
ALTER TRIGGER "ATTILA"."DELETENOTIFICATIONSONVPSDELETE" ENABLE;
--------------------------------------------------------
--  DDL for Procedure GET_USER_SERVICES
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "ATTILA"."GET_USER_SERVICES" (
    p_user_id IN NUMBER,
    p_cursor OUT SYS_REFCURSOR
) AS
BEGIN
    OPEN p_cursor FOR
        SELECT sub.ID AS subscription_id,
               srv.SERVICE_TYPE,
               srv.PRICE,
               sub.START_DATE,
               sub.END_DATE,
               sub.STATUS
        FROM ATTILA.SUBSCRIPTION sub
        JOIN ATTILA.SERVICE srv ON sub.SERVICE_ID = srv.ID
        WHERE sub.USER_ID = p_user_id;
END;

/
--------------------------------------------------------
--  DDL for Procedure GETACTIVESUBSCRIPTIONS
--------------------------------------------------------
set define off;

  CREATE OR REPLACE EDITIONABLE PROCEDURE "ATTILA"."GETACTIVESUBSCRIPTIONS" (
    p_user_id IN NUMBER
)
IS
BEGIN
    FOR rec IN (
        SELECT s.ID AS SUBSCRIPTION_ID, srv.SERVICE_TYPE, s.END_DATE
        FROM ATTILA.SUBSCRIPTION s
        JOIN ATTILA.SERVICE srv ON s.SERVICE_ID = srv.ID
        WHERE s.USER_ID = p_user_id AND s.STATUS = 'Aktív'
    )
    LOOP
        DBMS_OUTPUT.PUT_LINE('Előfizetés ID: ' || rec.SUBSCRIPTION_ID || 
                             ', Szolgáltatás: ' || rec.SERVICE_TYPE || 
                             ', Lejárat: ' || TO_CHAR(rec.END_DATE, 'YYYY-MM-DD'));
    END LOOP;
END;

/
--------------------------------------------------------
--  Constraints for Table ASK
--------------------------------------------------------

  ALTER TABLE "ATTILA"."ASK" ADD CONSTRAINT "PK_ASK" PRIMARY KEY ("USER_ID", "FAQ_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table DATABASES
--------------------------------------------------------

  ALTER TABLE "ATTILA"."DATABASES" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."DATABASES" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."DATABASES" MODIFY ("USER_ID" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."DATABASES" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table FAQ
--------------------------------------------------------

  ALTER TABLE "ATTILA"."FAQ" ADD PRIMARY KEY ("FAQ_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."FAQ" MODIFY ("QUESTION" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."FAQ" MODIFY ("FAQ_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table NOTIFICATIONS
--------------------------------------------------------

  ALTER TABLE "ATTILA"."NOTIFICATIONS" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."NOTIFICATIONS" MODIFY ("CREATED_AT" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."NOTIFICATIONS" MODIFY ("MESSAGE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."NOTIFICATIONS" MODIFY ("USER_ID" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."NOTIFICATIONS" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table PAYMENT
--------------------------------------------------------

  ALTER TABLE "ATTILA"."PAYMENT" ADD PRIMARY KEY ("PAYMENT_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."PAYMENT" MODIFY ("METHOD" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."PAYMENT" MODIFY ("DUE_DATE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."PAYMENT" MODIFY ("AMOUNT" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."PAYMENT" MODIFY ("PAYMENT_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SERVICE
--------------------------------------------------------

  ALTER TABLE "ATTILA"."SERVICE" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."SERVICE" MODIFY ("SERVICE_TYPE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."SERVICE" MODIFY ("PRICE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."SERVICE" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table SUBSCRIPTION
--------------------------------------------------------

  ALTER TABLE "ATTILA"."SUBSCRIPTION" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."SUBSCRIPTION" MODIFY ("STATUS" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."SUBSCRIPTION" MODIFY ("START_DATE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."SUBSCRIPTION" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table USERS
--------------------------------------------------------

  ALTER TABLE "ATTILA"."USERS" MODIFY ("ROLE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."USERS" ADD UNIQUE ("EMAIL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."USERS" ADD PRIMARY KEY ("USER_ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."USERS" MODIFY ("PASSWORD_HASH" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."USERS" MODIFY ("EMAIL" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."USERS" MODIFY ("USERNAME" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."USERS" MODIFY ("USER_ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table VPS
--------------------------------------------------------

  ALTER TABLE "ATTILA"."VPS" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."VPS" MODIFY ("SERVER_SPECS" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."VPS" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table WEBSITE
--------------------------------------------------------

  ALTER TABLE "ATTILA"."WEBSITE" ADD UNIQUE ("ADDRESS")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."WEBSITE" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."WEBSITE" MODIFY ("ADDRESS" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."WEBSITE" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Constraints for Table WEBSTORAGE
--------------------------------------------------------

  ALTER TABLE "ATTILA"."WEBSTORAGE" ADD PRIMARY KEY ("ID")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
  ALTER TABLE "ATTILA"."WEBSTORAGE" MODIFY ("STORAGE_SPACE" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."WEBSTORAGE" MODIFY ("NAME" NOT NULL ENABLE);
  ALTER TABLE "ATTILA"."WEBSTORAGE" MODIFY ("ID" NOT NULL ENABLE);
--------------------------------------------------------
--  Ref Constraints for Table ASK
--------------------------------------------------------

  ALTER TABLE "ATTILA"."ASK" ADD CONSTRAINT "FK_ASK_FAQ" FOREIGN KEY ("FAQ_ID")
	  REFERENCES "ATTILA"."FAQ" ("FAQ_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "ATTILA"."ASK" ADD CONSTRAINT "FK_ASK_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "ATTILA"."USERS" ("USER_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DATABASES
--------------------------------------------------------

  ALTER TABLE "ATTILA"."DATABASES" ADD CONSTRAINT "FK_DATABASES_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "ATTILA"."USERS" ("USER_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table NOTIFICATIONS
--------------------------------------------------------

  ALTER TABLE "ATTILA"."NOTIFICATIONS" ADD CONSTRAINT "FK_NOTIFICATIONS_SUBSCRIPTION" FOREIGN KEY ("SUBSCRIPTION_ID")
	  REFERENCES "ATTILA"."SUBSCRIPTION" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "ATTILA"."NOTIFICATIONS" ADD CONSTRAINT "FK_NOTIFICATIONS_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "ATTILA"."USERS" ("USER_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PAYMENT
--------------------------------------------------------

  ALTER TABLE "ATTILA"."PAYMENT" ADD CONSTRAINT "FK_PAYMENT_SUBSCRIPTION" FOREIGN KEY ("SUBSCRIPTION_ID")
	  REFERENCES "ATTILA"."SUBSCRIPTION" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "ATTILA"."PAYMENT" ADD CONSTRAINT "FK_PAYMENT_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "ATTILA"."USERS" ("USER_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SERVICE
--------------------------------------------------------

  ALTER TABLE "ATTILA"."SERVICE" ADD CONSTRAINT "FK_SERVICE_VPS" FOREIGN KEY ("VPS_ID")
	  REFERENCES "ATTILA"."VPS" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "ATTILA"."SERVICE" ADD CONSTRAINT "FK_SERVICE_WEBSTORAGE" FOREIGN KEY ("WEBSTORAGE_ID")
	  REFERENCES "ATTILA"."WEBSTORAGE" ("ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SUBSCRIPTION
--------------------------------------------------------

  ALTER TABLE "ATTILA"."SUBSCRIPTION" ADD CONSTRAINT "FK_SUBSCRIPTION_SERVICE" FOREIGN KEY ("SERVICE_ID")
	  REFERENCES "ATTILA"."SERVICE" ("ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "ATTILA"."SUBSCRIPTION" ADD CONSTRAINT "FK_SUBSCRIPTION_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "ATTILA"."USERS" ("USER_ID") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table WEBSITE
--------------------------------------------------------

  ALTER TABLE "ATTILA"."WEBSITE" ADD CONSTRAINT "FK_WEBSITE_USER" FOREIGN KEY ("USER_ID")
	  REFERENCES "ATTILA"."USERS" ("USER_ID") ON DELETE CASCADE ENABLE;
  ALTER TABLE "ATTILA"."WEBSITE" ADD CONSTRAINT "FK_WEBSITE_VPS" FOREIGN KEY ("SERVER_ID")
	  REFERENCES "ATTILA"."VPS" ("ID") ON DELETE SET NULL ENABLE;
